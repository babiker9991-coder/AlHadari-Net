<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>منتدى الحضري نت الرياضي 🏆</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap');
body {
  font-family: 'Cairo', sans-serif;
  background: linear-gradient(135deg, #001f3f, #004a9f);
  margin: 0; color: #fff; min-height: 100vh;
  display: flex; flex-direction: column; align-items: center;
}
header {
  width: 100%; background: rgba(0,0,0,0.3);
  text-align: center; padding: 25px 0;
  font-size: 32px; font-weight: 700; letter-spacing: 1px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.3);
  animation: glow 3s infinite alternate;
}
@keyframes glow {
  from { text-shadow: 0 0 5px #fff, 0 0 10px #04b2ff; }
  to { text-shadow: 0 0 20px #04b2ff, 0 0 40px #0099ff; }
}
nav {
  background: rgba(255,255,255,0.1);
  width: 100%; text-align: center; padding: 10px 0;
  backdrop-filter: blur(8px);
}
nav a {
  color: #fff; text-decoration: none; margin: 0 15px;
  font-weight: 600; transition: 0.3s;
}
nav a:hover { color: #04b2ff; text-shadow: 0 0 8px #04b2ff; }

section {
  display: none;
  width: 95%; max-width: 1000px;
  background: rgba(255,255,255,0.1);
  margin: 25px auto; padding: 25px;
  border-radius: 14px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.3);
}
section.active { display: block; }

input, textarea, button {
  width: 100%; border: none; border-radius: 10px;
  margin-top: 10px; padding: 12px;
  font-size: 16px; outline: none;
}
input, textarea {
  background: rgba(255,255,255,0.8);
  color: #000;
}
button {
  background: linear-gradient(45deg, #0099ff, #00ccff);
  color: #fff; font-weight: bold; cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
}
button:hover {
  transform: translateY(-2px);
  box-shadow: 0 0 10px #00ccff;
}

.news-item {
  background: rgba(255,255,255,0.15);
  border-radius: 12px; padding: 20px; margin: 15px 0;
  box-shadow: 0 0 15px rgba(0,0,0,0.2);
  transition: transform 0.2s, box-shadow 0.2s;
}
.news-item:hover {
  transform: translateY(-3px);
  box-shadow: 0 0 20px #04b2ff;
}
.news-item h3 {
  color: #fff; text-shadow: 0 0 6px #00ccff;
}
.news-item p { color: #ddd; line-height: 1.6; }
.news-item img {
  width: 100%; border-radius: 10px; margin-top: 10px;
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
}

#msg { margin-top: 10px; font-weight: bold; }
.success { color: #0f0; }
.error { color: #ff4444; }

footer {
  text-align: center; padding: 10px;
  font-size: 14px; color: #ccc;
  background: rgba(0,0,0,0.2);
  margin-top: auto;
}
</style>
</head>
<body>

<header>🏆 منتدى الحضري نت الرياضي</header>
<nav>
  <a href="#" onclick="showSection('home')">الصفحة الرئيسية</a>
  <a href="#" id="dashboard-link" onclick="showSection('dashboard')" style="display:none;">إدارة المنتدى</a>
</nav>

<section id="home" class="active">
  <h2 style="text-align:center; text-shadow:0 0 10px #04b2ff;">📰 آخر المواضيع</h2>
  <div id="news-list"></div>
</section>

<section id="dashboard">
  <h2>✍️ إضافة موضوع جديد</h2>
  <input type="text" id="title" placeholder="عنوان الموضوع" />
  <textarea id="content" rows="4" placeholder="محتوى الموضوع"></textarea>
  <input type="file" id="image" accept="image/*" />
  <button onclick="addNews()">نشر الموضوع</button>
  <p id="msg"></p>
</section>

<footer>© 2025 الحضري نت - تصميم وتألق بإشرافك 🌟</footer>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-storage-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyDxoEJLaGcEy7s1P2nE2_bDniS71ldI31Q",
  authDomain: "alhadari-net.firebaseapp.com",
  projectId: "alhadari-net",
  storageBucket: "alhadari-net.firebasestorage.app",
  messagingSenderId: "465757130283",
  appId: "1:465757130283:web:2ee9d5a6ceaf63af5e246e"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const storage = firebase.storage();

let isAdmin = false;
const adminPass = "221133";

window.onload = () => {
  const pass = prompt("🔐 أدخل كلمة مرور الإدارة (أو اضغط إلغاء للدخول كزائر):");
  if (pass === adminPass) {
    isAdmin = true;
    document.getElementById("dashboard-link").style.display = "inline-block";
    showSection('dashboard');
  } else {
    showSection('home');
  }
  loadNews();
};

function showSection(id) {
  document.querySelectorAll("section").forEach(s => s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

async function addNews() {
  if (!isAdmin) { alert("❌ فقط المشرف يمكنه النشر"); return; }
  const title = document.getElementById("title").value.trim();
  const content = document.getElementById("content").value.trim();
  const file = document.getElementById("image").files[0];
  const msg = document.getElementById("msg");
  if (!title || !content) { msg.textContent = "الرجاء تعبئة جميع الحقول"; msg.className="error"; return; }

  msg.textContent = "⏳ جاري النشر...";
  let imageUrl = "";
  try {
    if (file) {
      const ref = storage.ref("news_images/" + Date.now() + "_" + file.name);
      await ref.put(file);
      imageUrl = await ref.getDownloadURL();
    }
    await db.collection("sportsNews").add({
      title, content, image: imageUrl,
      createdAt: firebase.firestore.FieldValue.serverTimestamp()
    });
    msg.textContent = "✅ تم نشر الموضوع بنجاح";
    msg.className = "success";
    document.getElementById("title").value = "";
    document.getElementById("content").value = "";
    document.getElementById("image").value = "";
    loadNews();
  } catch (e) {
    console.error(e);
    msg.textContent = "❌ حدث خطأ أثناء النشر";
    msg.className = "error";
  }
}

async function loadNews() {
  const list = document.getElementById("news-list");
  list.innerHTML = "<p>⏳ جاري التحميل...</p>";
  try {
    const snapshot = await db.collection("sportsNews").orderBy("createdAt","desc").get();
    list.innerHTML = "";
    snapshot.forEach(doc => {
      const d = doc.data();
      const div = document.createElement("div");
      div.className = "news-item";
      div.innerHTML = `
        <h3>📢 ${d.title}</h3>
        <p>${d.content}</p>
        ${d.image ? `<img src="${d.image}" alt="صورة الموضوع" />` : ""}
      `;
      list.appendChild(div);
    });
  } catch (e) {
    console.error(e);
    list.innerHTML = "⚠️ تعذر تحميل المواضيع";
  }
}
</script>
</body>
</html>
